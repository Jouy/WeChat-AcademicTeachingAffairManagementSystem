# 高校教务微信公众平台

队伍：Secret
编码：MewX


## 如何使用本代码（以新浪云为例）

- 新建一个项目，采用php5.6作为服务端程序；
- 新建共享型数据库，并且执行`源代码目录下“sql/atams.sql“脚本`；
- 数据库的配置信息在`源代码目录下“utils/shell.php“文件`中，该源代码头部有两段注释：`LOCAL`和`SAE`，2个注释部分的`各5行`只需要保证有一个部分的5行开启即可，分别是针对本地和SAE云端的部署。
- 微信的配置信息在`源代码目录下“wechat.php“文件`开头处定义，定义了`TOKEN`、`AppID`、`EncodingAESKey`宏，用于保存微信公众平台提供的通信key；
- 在新浪云中新建代码版本，然后将所有的代码拷贝至版本库中即可；
- 在微信公众平台后台的`开发者中心`配置安全密钥，按照所配置的内容开启即可，其中网络地址为`http://xxxx/wechat.php`。


## 功能特色

- 采用微信安全模式通信，`AES256`对称加密；
- MySQL存储的密码采用`SHA-256散列`配`Base64压缩`加密，用户敏感操作时会要求输入密码；
- 代码中对于用户输入的部分采用了`_remove_sql_inject`处理，防止SQL注入；
- 模糊语音识别依赖于模糊语音库，目前`help`和`new`的模糊语音数据库较为完善；
- 模糊语音识别将汉字转换为拼音处理，进一步降低识别出错概率；


## 开发环境

- Apache 2.4.10
- PHP 5.5.14
- MySQL 5.7.4 Community
- MySQL Workbench 6.3 Community
- Atom 0.187.0
